---
phase: 04-github-publication-readme
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .gitignore
  - package.json
autonomous: false

must_haves:
  truths:
    - "Repository lightdash-mcp exists on user's GitHub account"
    - "node_modules, build, and .env are excluded from version control"
    - "package.json has description, keywords, license, and repository URL"
  artifacts:
    - path: ".gitignore"
      provides: "Git exclusion rules for node_modules, build, .env, and OS files"
      contains: "node_modules"
    - path: "package.json"
      provides: "Package metadata with repo URL, description, keywords, license"
      contains: "repository"
  key_links:
    - from: "package.json"
      to: "GitHub repository"
      via: "repository.url field"
      pattern: "github\\.com.*lightdash-mcp"
---

<objective>
Create .gitignore, update package.json metadata, authenticate GitHub CLI, create the lightdash-mcp repository on GitHub, and push the codebase.

Purpose: The project needs to be publicly available on GitHub so users can discover, clone, and install it. This plan handles all repository infrastructure (GH-01, GH-02).
Output: Public GitHub repository at github.com/{username}/lightdash-mcp with clean history, proper .gitignore, and complete package.json metadata.
</objective>

<execution_context>
@/Users/mikhailgasanov/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mikhailgasanov/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@package.json
@tsconfig.json
@deploy.sh
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create .gitignore and update package.json metadata</name>
  <files>.gitignore, package.json</files>
  <action>
1. Create `.gitignore` with these entries (one per line):
   - `node_modules/`
   - `build/`
   - `.env`
   - `.env.*`
   - `.DS_Store`
   - `*.tgz`
   Do NOT add `.planning/` or `.claude/` -- those stay in the repo for project continuity.

2. Update `package.json` -- keep all existing fields, add/modify:
   - `"name": "lightdash-mcp"` (rename from lightdash-mcp-server to match repo name)
   - `"description": "MCP server for Lightdash — gives Claude Desktop read-only access to your Lightdash projects, charts, dashboards, and queries"`
   - `"license": "MIT"`
   - `"keywords": ["mcp", "lightdash", "claude-desktop", "model-context-protocol", "business-intelligence"]`
   - `"repository"` field will be set AFTER the repo is created in Task 3 (leave for now, or use placeholder `"repository": { "type": "git", "url": "git+https://github.com/OWNER/lightdash-mcp.git" }`)
   - `"author"` -- discover via `git config user.name` and `git config user.email`, format as `"Name <email>"`
   - Keep ALL existing fields (version, type, bin, scripts, files, dependencies, devDependencies) unchanged.

3. Stage and commit: `.gitignore` and `package.json`. Commit message: `chore: add .gitignore and update package.json metadata`
  </action>
  <verify>
- `cat .gitignore` shows node_modules/, build/, .env entries
- `node -e "const p=require('./package.json'); console.log(p.name, p.license, p.keywords?.length)"` outputs `lightdash-mcp MIT 5`
- `git status` shows clean working tree (node_modules and build now ignored)
  </verify>
  <done>.gitignore excludes node_modules/build/.env, package.json has name/description/license/keywords, both committed</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Authenticate GitHub CLI</name>
  <files>n/a</files>
  <action>
Pause for human action. GitHub CLI (gh) is installed but not authenticated. Claude cannot complete the OAuth browser flow.

The user must run `gh auth login` in their terminal, choosing GitHub.com + HTTPS + Login with web browser. After authenticating, they confirm by running `gh auth status`.
  </action>
  <verify>Run `gh auth status` -- should show "Logged in to github.com as {username}"</verify>
  <done>GitHub CLI is authenticated and ready for repo creation</done>
  <what-built>Nothing yet -- this is a prerequisite gate. GitHub CLI (gh) is installed but not authenticated. Claude cannot complete OAuth browser flow.</what-built>
  <how-to-verify>
    Run this command in your terminal:
    ```
    gh auth login
    ```
    Choose: GitHub.com, HTTPS, Login with a web browser. Follow the prompts.

    When done, confirm by running:
    ```
    gh auth status
    ```
    You should see "Logged in to github.com as {username}".
  </how-to-verify>
  <resume-signal>Type "authenticated" or paste the output of `gh auth status`</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Create GitHub repo and push codebase</name>
  <files>package.json</files>
  <action>
1. Discover GitHub username: `gh api user --jq '.login'`

2. Create public repo on GitHub:
   ```
   gh repo create lightdash-mcp --public --description "MCP server for Lightdash — gives Claude Desktop read-only access to your Lightdash projects, charts, dashboards, and queries" --source .
   ```
   This creates the repo AND sets the remote origin in one command.

3. Update `package.json` repository field with actual URL:
   ```json
   "repository": {
     "type": "git",
     "url": "git+https://github.com/{USERNAME}/lightdash-mcp.git"
   }
   ```
   Replace {USERNAME} with the discovered username.

4. Also add `"homepage": "https://github.com/{USERNAME}/lightdash-mcp#readme"` and `"bugs": { "url": "https://github.com/{USERNAME}/lightdash-mcp/issues" }` to package.json.

5. Commit the package.json update: `chore: add repository URL to package.json`

6. Push all commits to GitHub: `git push -u origin main`
   (If the default branch is `master`, push to master instead. Check with `git branch --show-current`.)

7. Verify: `gh repo view --json url --jq '.url'` should return the repo URL.
  </action>
  <verify>
- `gh repo view --json url --jq '.url'` returns `https://github.com/{username}/lightdash-mcp`
- `git remote -v` shows origin pointing to the repo
- `gh repo view --json isPrivate --jq '.isPrivate'` returns `false`
- Visit the repo URL in browser -- should show source files, no node_modules or build directory
  </verify>
  <done>Public GitHub repo exists at github.com/{username}/lightdash-mcp, all commits pushed, package.json has correct repository URL</done>
</task>

</tasks>

<verification>
- [ ] .gitignore exists and excludes node_modules/, build/, .env
- [ ] package.json has name "lightdash-mcp", description, MIT license, 5 keywords, repository URL
- [ ] GitHub repo is public and accessible
- [ ] All source files are pushed (src/, package.json, tsconfig.json, deploy.sh)
- [ ] No node_modules or build directory in the repo
</verification>

<success_criteria>
GH-01 and GH-02 are complete: repository lightdash-mcp exists on GitHub with proper .gitignore and complete package.json metadata.
</success_criteria>

<output>
After completion, create `.planning/phases/04-github-publication-readme/04-01-SUMMARY.md`
</output>
